<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>OpenCV Processing Book</title>

    <!-- Bootstrap core CSS -->
   <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"/>
   <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css"/>
   <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"/>

   <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"> </script>
   <script type="text/javascript" src="theme/html/javascripts/disqus.js"> </script>

   <link rel="stylesheet" href="theme/html/stylesheets/atlas.css"/>


  </head>

  <body data-type="book">

    <div class="navbar navbar-fixed-top" role="navigation">	
      <div class="container">
        <div class="navbar-header">	
	  <img class="logo" src="theme/html/assets/logo-white.svg"/>
          <a class="title" href="#">OpenCV Processing Book</a>
        </div>

	<div id="slideout">
	    <span class="toc-control fa fa-bars"/>
	    <div id="slideout_inner">
		 <div class="input-group">
	            <input type="text" class="form-control" placeholder="Search" name="srch-term" id="srch-term"/>
	            <div class="input-group-btn">
	               <button class="btn btn-default search-button" type="submit"><span class="fa fa-search"/></button>
	            </div>
	         </div>   
	        <h2>Contents</h2>
	        <nav data-type="toc" id="idp82864"><ol><li data-type="part"><a href="part01.html#idp19328">World of Filters</a></li><li data-type="chapter"><a href="ch01.html#idm2129632">Basic Output</a></li><li data-type="chapter"><a href="ch02.html#idm1705728">Blur</a><ol>




<li data-type="sect1"><a href="ch02.html#idp87968">Blur Strength and Direction - Convolutions and Kernels</a><ol>
























<li data-type="sect2"><a href="ch02.html#idp380048">Color Images</a></li>
</ol></li>
<li data-type="sect1"><a href="ch02.html#idp84768">Parameters</a></li>
<li data-type="sect1"><a href="ch02.html#idp85024">Related Functions</a></li>
</ol></li><li data-type="chapter"><a href="ch03.html#idp393392">Dilate and Erode</a></li><li data-type="chapter"><a href="ch04.html#idp394016">Edge Detection</a><ol>



<li data-type="sect1"><a href="ch04.html#idp404592">Canny Edge Detection</a></li>
<li data-type="sect1"><a href="ch04.html#idp408272">Sobel Edge Detection</a><ol>




<li data-type="sect2"><a href="ch04.html#idp414624">Parameters</a></li>
</ol></li>
<li data-type="sect1"><a href="ch04.html#idp418896">Scharr Edge Detection</a></li>
</ol></li><li data-type="chapter"><a href="ch05.html#idp424016">Histogram Equalization</a></li><li data-type="chapter"><a href="ch06.html#idp432000">In Range</a><ol>








<li data-type="sect1"><a href="ch06.html#idp447872">Use with Color Images and the Hue Channel</a></li>
<li data-type="sect1"><a href="ch06.html#idp450864">Parameters</a></li>
<li data-type="sect1"><a href="ch06.html#idp453360">Related Material</a></li>
</ol></li><li data-type="chapter"><a href="ch07.html#idp439920">Region of Interest</a><ol>





<li data-type="sect1"><a href="ch07.html#idp468384">Combined with Histogram Equalization</a></li>
<li data-type="sect1"><a href="ch07.html#idp473344">Parameters</a></li>
</ol></li><li data-type="chapter"><a href="ch08.html#idp474160">Threshold</a><ol>







<li data-type="sect1"><a href="ch08.html#idp478208">Related Functions</a></li>
<li data-type="sect1"><a href="ch08.html#idp482752">Parameters</a></li>
<li data-type="sect1"><a href="ch08.html#idp485616">Code</a></li>
</ol></li><li data-type="chapter"><a href="ch09.html#idp487440">Track the Brightest Point</a><ol>





<li data-type="sect1"><a href="ch09.html#idp489536">Video Summary</a><ol>



<li data-type="sect2"><a href="ch09.html#idp491840">Luma: A More Accurate Measure of Brightness</a></li>
</ol></li>
<li data-type="sect1"><a href="ch09.html#idp506304">Quiz</a></li>
<li data-type="sect1"><a href="ch09.html#idp514512">Code</a><ol>


<li data-type="sect2"><a href="ch09.html#idp515344">Important Functions</a></li>
<li data-type="sect2"><a href="ch09.html#idp519408">Browse the Code</a></li>
</ol></li>
</ol></li><li data-type="part"><a href="part02.html#idp523376">Track all the Things</a></li><li data-type="chapter"><a href="ch10.html#idp525456">Face Detection</a><ol>






<li data-type="sect1"><a href="ch10.html#idp528608">Video Summary</a></li>
<li data-type="sect1"><a href="ch10.html#idp545824">The Politics of Face Detection</a></li>
<li data-type="sect1"><a href="ch10.html#idp547408">Quiz</a></li>
<li data-type="sect1"><a href="ch10.html#idp569632">Code</a><ol>


<li data-type="sect2"><a href="ch10.html#idp570576">Important Functions</a></li>
<li data-type="sect2"><a href="ch10.html#idp575280">Browse the Code</a></li>
</ol></li>
</ol></li><li data-type="part"><a href="part03.html#idp578480">Projects</a></li><li data-type="chapter"><a href="ch11.html#idp580000">Test Case 1: Film Scanner Frame Extractor</a><ol>


<li data-type="sect1"><a href="ch11.html#idp580816">Part 1: Understanding the Problem</a><ol>


<li data-type="sect2"><a href="ch11.html#idp582304">Kinograph: DIY Film Scanner</a></li>
<li data-type="sect2"><a href="ch11.html#idp591264">The Problem: Rotation and Overscan</a></li>
<li data-type="sect2"><a href="ch11.html#idp597392">How to Think about the Problem</a></li>
</ol></li>
</ol></li></ol></nav>
	    </div>
	</div>
      </div>
    </div>


    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <section data-type="chapter" data-pdf-bookmark="Chapter 7. Region of Interest" id="idp439920">
<h1>Region of Interest</h1>

<p><img src="http://gregborenstein.com/assets/opencv/region_of_interest.gif" width="400px"/></p>
<p>When filtering images, sometimes we don’t want to apply our filters to the entire image. Sometimes we’d rather select a particular area of the image just filter it. Maybe we only care about a feature if it appears in a particular spot. Or maybe we’re running filtering operations that will have different results depending on their input (like we just saw above with histogram equalization).</p>
<p>OpenCV lets us select a Region of Interest (ROI) in order to do just that. After we set our ROI, subsequent filters will only apply to that area. In the GIF above you can see our threshold filter applied just to the area around the actors face.</p>
<section data-type="sect1" data-pdf-bookmark="Combined with Histogram Equalization" id="idp468384">
<h1>Combined with Histogram Equalization</h1>

<p><img src="http://gregborenstein.com/assets/opencv/roi_histogram.gif" width="400px"/></p>
<p>As we saw, the effects of histogram equalization depend on the range of grays in the image being processed. Our original frame scans have a wide range of gray values and therefore the filter had little effect. But, if we select the right Region of Interest, histogram equalization can really help us bring out the sprocket holes.</p>
<p>In the GIF above, I’ve selected a small square on the right as an ROI. This area captures the edge of the frame and one of the sprocket holes. Unlike our earlier attempt on the whole image, running histogram equalization on just this area has a dramatic effect. It significantly darkens the edges of the sprocket hole making it much easier to detect.</p>
<p>Using an ROI like this, makes our image filters work a little bit more like our eyes, which are constantly refocusing and re-adjusting to different objects and light conditions in front of us.</p>
</section>
<section data-type="sect1" data-pdf-bookmark="Parameters" id="idp473344">
<h1>Parameters</h1>

<p>A Region of Interest is a rectangular area of the image we select to exclusively receive OpenCV operations. Hence, the arguments to <code>setROI()</code> mirror those to <code>rect()</code>, the Processing function for drawing rectangles: x, y, width, height.</p>
<pre data-type="programlisting">opencv.setROI(400,250,150,150);
opencv.threshold(50);</pre>
<p><em>Note: there’s also a corresponding <code>opencv.releaseROI()</code> function that ends the use of the Region of Interest. After calling it, further OpenCV functions will affect the entire image.</em></p>
</section>
</section>
        </div>
      </div>
    </div>
  
    <div class="container">
	<div class="row">
	  <div class="pagination">
	      <ul>
	        <li class="prev"><span class="fa fa-chevron-left"/> <a href="ch06.html">Previous</a></li>
	        <li class="next"><a href="ch08.html">Next</a> <span class="fa fa-chevron-right"/></li>
	      </ul>
	  </div>       
	</div>
    </div>

    <div class="container">
       <div class="row">
          <div class="col-md-12 disqus">
	     <div id="disqus_thread"/>
	   </div>
       </div>
    </div>
 
    <div class="footer">
      <footer>
        <p>© O'Reilly Media, 2014</p>
      </footer>
    </div>

  </body>

</html>
