<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>OpenCV Processing Book</title>

    <!-- Bootstrap core CSS -->
   <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"/>
   <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css"/>
   <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"/>

   <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"> </script>
   <script type="text/javascript" src="theme/html/javascripts/disqus.js"> </script>

   <link rel="stylesheet" href="theme/html/stylesheets/atlas.css"/>


  </head>

  <body data-type="book">

    <div class="navbar navbar-fixed-top" role="navigation">	
      <div class="container">
        <div class="navbar-header">	
	  <img class="logo" src="theme/html/assets/logo-white.svg"/>
          <a class="title" href="#">OpenCV Processing Book</a>
        </div>

	<div id="slideout">
	    <span class="toc-control fa fa-bars"/>
	    <div id="slideout_inner">
		 <div class="input-group">
	            <input type="text" class="form-control" placeholder="Search" name="srch-term" id="srch-term"/>
	            <div class="input-group-btn">
	               <button class="btn btn-default search-button" type="submit"><span class="fa fa-search"/></button>
	            </div>
	         </div>   
	        <h2>Contents</h2>
	        <nav data-type="toc" id="idp89424"><ol><li data-type="chapter"><a href="ch01.html#idp493232">Filters: Basic Output</a></li><li data-type="chapter"><a href="ch02.html#idm1279744">Filters: Blur</a><ol>




<li data-type="sect1"><a href="ch02.html#idp550560">Blur Strength and Direction - Convolutions and Kernels</a><ol>
























<li data-type="sect2"><a href="ch02.html#idp845296">Color Images</a></li>
</ol></li>
<li data-type="sect1"><a href="ch02.html#idp546208">Parameters</a></li>
<li data-type="sect1"><a href="ch02.html#idp852656">Related Functions</a></li>
</ol></li><li data-type="chapter"><a href="ch03.html#idp858368">Filters: Brightness and Contrast</a></li><li data-type="chapter"><a href="ch04.html#idp859552">Filters: Dilate and Erode</a></li><li data-type="chapter"><a href="ch05.html#idp860064">Filters: Edge Detection</a><ol>



<li data-type="sect1"><a href="ch05.html#idp866960">Canny Edge Detection</a></li>
<li data-type="sect1"><a href="ch05.html#idp876112">Sobel Edge Detection</a><ol>




<li data-type="sect2"><a href="ch05.html#idp876528">Parameters</a></li>
</ol></li>
<li data-type="sect1"><a href="ch05.html#idp885552">Scharr Edge Detection</a></li>
</ol></li><li data-type="chapter"><a href="ch06.html#idp890352">Filters: Histogram Equalization</a></li><li data-type="chapter"><a href="ch07.html#idp897728">Filters: In Range</a><ol>








<li data-type="sect1"><a href="ch07.html#idp914176">Use with Color Images and the Hue Channel</a></li>
<li data-type="sect1"><a href="ch07.html#idp917024">Parameters</a></li>
<li data-type="sect1"><a href="ch07.html#idp919680">Related Material</a></li>
</ol></li><li data-type="chapter"><a href="ch08.html#idp905568">Filters: Region of Interest</a><ol>





<li data-type="sect1"><a href="ch08.html#idp934672">Combined with Histogram Equalization</a></li>
<li data-type="sect1"><a href="ch08.html#idp930832">Parameters</a></li>
</ol></li><li data-type="chapter"><a href="ch09.html#idp940048">Filters: Threshold</a><ol>







<li data-type="sect1"><a href="ch09.html#idp944512">Related Functions</a></li>
<li data-type="sect1"><a href="ch09.html#idp949056">Parameters</a></li>
<li data-type="sect1"><a href="ch09.html#idp951664">Code</a></li>
</ol></li><li data-type="chapter"><a href="ch10.html#idp953744">Filters: Adaptive Threshold</a><ol>


<li data-type="sect1"><a href="ch10.html#idp954608">Related Functions</a></li>
</ol></li><li data-type="chapter"><a href="ch11.html#idp958432">Tracking: Background Subtraction</a><ol>



<li data-type="sect1"><a href="ch11.html#idp960016">Video Script</a></li>
<li data-type="sect1"><a href="ch11.html#idp963344">Video Summary</a></li>
<li data-type="sect1"><a href="ch11.html#idp964720">Quiz</a></li>
<li data-type="sect1"><a href="ch11.html#idp978960">Code</a><ol>


<li data-type="sect2"><a href="ch11.html#idp976464">Important Functions</a></li>
<li data-type="sect2"><a href="ch11.html#idp985024">Browse the Code</a></li>
</ol></li>
</ol></li><li data-type="chapter"><a href="ch12.html#idp986368">Tracking: Track the Brightest Point</a><ol>





<li data-type="sect1"><a href="ch12.html#idp988592">Video Summary</a><ol>



<li data-type="sect2"><a href="ch12.html#idp990880">Luma: A More Accurate Measure of Brightness</a></li>
</ol></li>
<li data-type="sect1"><a href="ch12.html#idp1003024">Quiz</a></li>
<li data-type="sect1"><a href="ch12.html#idp1012656">Code</a><ol>


<li data-type="sect2"><a href="ch12.html#idp1018480">Important Functions</a></li>
<li data-type="sect2"><a href="ch12.html#idp1017984">Browse the Code</a></li>
</ol></li>
</ol></li><li data-type="chapter"><a href="ch13.html#idp1021872">Tracking: Finding Contours and Lines</a><ol>


<li data-type="sect1"><a href="ch13.html#idp1023712">Video Script</a></li>
<li data-type="sect1"><a href="ch13.html#idp1026320">Video Summary</a></li>
<li data-type="sect1"><a href="ch13.html#idp1027456">Quiz</a></li>
<li data-type="sect1"><a href="ch13.html#idp1028784">Code</a><ol>


<li data-type="sect2"><a href="ch13.html#idp1029760">Important Functions</a></li>
<li data-type="sect2"><a href="ch13.html#idp1035632">Browse the Code</a></li>
</ol></li>
</ol></li><li data-type="chapter"><a href="ch14.html#idp1036768">Tracking: Face Detection</a><ol>






<li data-type="sect1"><a href="ch14.html#idp1039968">Video Summary</a></li>
<li data-type="sect1"><a href="ch14.html#idp1057120">The Politics of Face Detection</a></li>
<li data-type="sect1"><a href="ch14.html#idp1058528">Quiz</a></li>
<li data-type="sect1"><a href="ch14.html#idp1080976">Code</a><ol>


<li data-type="sect2"><a href="ch14.html#idp1082032">Important Functions</a></li>
<li data-type="sect2"><a href="ch14.html#idp1086608">Browse the Code</a></li>
</ol></li>
</ol></li><li data-type="chapter"><a href="ch15.html#idp1089776">Tracking: Color Tracking in HSV Color Space</a><ol>





<li data-type="sect1"><a href="ch15.html#idp1093280">Video Summary</a></li>
<li data-type="sect1"><a href="ch15.html#idp1105888">Quiz</a></li>
<li data-type="sect1"><a href="ch15.html#idp1109392">Code</a><ol>



<li data-type="sect2"><a href="ch15.html#idp1111296">Important Functions</a></li>
<li data-type="sect2"><a href="ch15.html#idp1117136">Browse the Code</a></li>
</ol></li>
</ol></li></ol></nav>
	    </div>
	</div>
      </div>
    </div>


    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <section data-type="chapter" data-pdf-bookmark="Chapter 15. Tracking: Color Tracking in HSV Color Space" id="idp1089776">
<h1>Tracking: Color Tracking in HSV Color Space</h1>

<p><em>One of the simplest ways to track an object with OpenCV is based on its color. However, the color space we use to represent the colors in an image can have a big effect on how easy it is to implement color tracking. In this section, we’ll prepare an image for color tracking by converting it to HSV color space and filtering it based on a range of Hues. After filtering, we’ll be able to easily track our object’s position by finding contours.</em></p>
<iframe src="http://player.vimeo.com/video/69767694" width="500" height="281" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""> </iframe>

<section data-type="sect1" data-pdf-bookmark="Video Summary" id="idp1093280">
<h1>Video Summary</h1>

<ul>
<li>Color tracking is useful when you can control the color of the tracked-object or it already sticks out from the background.</li>
<li>A “color space” describes how we represent a single color as a mix of different elements.</li>
<li>The most common color space is RGB.</li>
<li>RGB is the default color space in Processing.</li>
<li>RGB is flawed for color tracking because changes in color that look small to the eye effect all three channels significantly.</li>
<li>HSV is a more useful color space for tracking.</li>
<li>HSV stands for Hue, Saturation, and Value.</li>
<li>Hue is color. Saturation is intensity. Value is brightness.</li>
<li>For color tracking we can just use the Hue channel.</li>
<li>A Histogram is a graph that shows frequency of each color in an image.</li>
<li>OpenCV provides that lets us filter an image based on a range of values.</li>
<li>Filtering a colorful image by a range of hues reveals which hue corresponds to which color.</li>
<li>Hue 0 is red and then it ranges up through orange, yellow, green, white (around 90), and up to blue.</li>
<li>In OpenCV, hue ranges from 0-180.</li>
<li>To track an object in live video we apply a range filter to the hue, selecting the color range of our object.</li>
<li>Then we find contours in that filtered image.</li>
<li>The contour with the largest area will be the object we want to track</li>
<li>We can draw the bounding box of that contour.</li>
<li>The center of the contour’s bounding box will be the object’s location.</li>
</ul>
</section>
<section data-type="sect1" data-pdf-bookmark="Quiz" id="idp1105888">
<h1>Quiz</h1>

<p>Q: What is the default color space in Processing?</p>
<p>Answer: RGB</p>
<p>Q: Are there colors that can be represented in HSV color space that are impossible to represent in RGB color space?</p>
<p>Answer: No</p>
<p>Q: Using OpenCV’s scale, what color is represented by the following HSV values: 215, 50, 30?</p>
<p>Answer: None. Hue ranges from 0-180.</p>
</section>
<section data-type="sect1" data-pdf-bookmark="Code" id="idp1109392">
<h1>Code</h1>

<p>The code sample below will walk you step-by-step through implementing Hue-based color tracking. </p>
<section data-type="sect2" data-pdf-bookmark="Important Functions" id="idp1111296">
<h2>Important Functions</h2>

<ul>
<li><code>opencv.useColor()</code> - Tell OpenCV which color space to use.</li>
<li><code>opencv.getBufferH()</code> - Access the Hue channel of the image.</li>
<li><code>opencv.setBufferGray()</code> - Set the gray channel of the image to the values of another channel.</li>
<li><code>opencv.inRange()</code> - Filter the image based on a range of values.</li>
<li><code>opencv.findContours()</code> - Find contours in the current image.</li>
<li><code>contour.getBoundingBox()</code> - Get the rectangular bounding box around a particular contour.</li>
</ul>
</section>
<section data-type="sect2" data-pdf-bookmark="Browse the Code" id="idp1117136">
<h2>Browse the Code</h2>

<script src="https://gist.github.com/atduskgreg/5937005.js"> </script>

</section>
</section>
</section>
        </div>
      </div>
    </div>
  
    <div class="container">
	<div class="row">
	  <div class="pagination">
	      <ul>
	        <li class="prev"><span class="fa fa-chevron-left"/> <a href="ch14.html">Previous</a></li>
	        <li class="next"> <span class="fa fa-chevron-right"/></li>
	      </ul>
	  </div>       
	</div>
    </div>

    <div class="container">
       <div class="row">
          <div class="col-md-12 disqus">
	     <div id="disqus_thread"/>
	   </div>
       </div>
    </div>
 
    <div class="footer">
      <footer>
        <p>© O'Reilly Media, 2014</p>
      </footer>
    </div>

  </body>

</html>
